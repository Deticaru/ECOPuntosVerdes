import"./modulepreload-polyfill-B5Qt9EMX.js";function p(){const e=document.getElementById("syncButton"),o=document.getElementById("syncText"),t=document.getElementById("syncLoader"),s=document.getElementById("syncSuccess");e.disabled=!0,e.classList.add("opacity-75","cursor-not-allowed"),o.classList.add("hidden"),t.classList.remove("hidden"),setTimeout(()=>{t.classList.add("hidden"),s.classList.remove("hidden"),e.classList.add("animate-pulse-success","bg-green-600"),e.classList.remove("bg-walmart-blue"),setTimeout(()=>{s.classList.add("hidden"),o.classList.remove("hidden"),e.disabled=!1,e.classList.remove("opacity-75","cursor-not-allowed","animate-pulse-success","bg-green-600"),e.classList.add("bg-walmart-blue"),i("SincronizaciÃ³n completada exitosamente con Walmart API")},2e3)},3e3)}function i(e,o="success"){const t=document.createElement("div");let s,n;switch(o){case"info":s="bg-blue-600",n=`<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>`;break;case"error":s="bg-red-600",n=`<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>`;break;default:s="bg-green-600",n=`<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>`}t.className=`fixed top-4 right-4 ${s} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300`,t.innerHTML=`
        <div class="flex items-center space-x-2">
            ${n}
            <span>${e}</span>
        </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.classList.remove("translate-x-full")},100),setTimeout(()=>{t.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(t)},300)},4e3)}function u(e){document.querySelectorAll(".section-content").forEach(d=>{d.classList.add("hidden")});const t=document.getElementById(e+"-section");t&&t.classList.remove("hidden"),document.querySelectorAll(".nav-btn").forEach(d=>{d.classList.remove("bg-white","bg-opacity-20"),d.classList.add("sidebar-hover","glass-effect")});const n=document.querySelector(`[data-section="${e}"]`);n&&(n.classList.remove("sidebar-hover","glass-effect"),n.classList.add("bg-white","bg-opacity-20"));const c=document.querySelector("header h1"),g=document.querySelector("header p"),l={productos:{title:"Productos ECO - ConfiguraciÃ³n",subtitle:"GestiÃ³n de productos sostenibles y asignaciÃ³n de puntos por huella de carbono"},usuarios:{title:"GestiÃ³n de Usuarios ECO",subtitle:"AdministraciÃ³n de usuarios y seguimiento de puntos verdes"},ventas:{title:"Dashboard ECO - Impacto Ambiental",subtitle:"Monitoreo de ahorro de COâ‚‚ y otorgamiento de puntos verdes"},reportes:{title:"Centro de Reportes Ambientales",subtitle:"AnÃ¡lisis de impacto ambiental y mÃ©tricas de sostenibilidad"}};c&&l[e]&&(c.textContent=l[e].title,g.textContent=l[e].subtitle),e==="ventas"&&setTimeout(()=>{h()},100)}function h(){const e=document.getElementById("salesChart");if(e&&!e.chart){const t=e.getContext("2d");e.chart=new Chart(t,{type:"line",data:{labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio"],datasets:[{label:"COâ‚‚ Ahorrado (kg)",data:[156,289,198,341,275,412],borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:3,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},x:{grid:{color:"rgba(0, 0, 0, 0.05)"}}},plugins:{legend:{display:!1}},elements:{point:{radius:4,hoverRadius:6}}}})}const o=document.getElementById("inventoryChart");if(o&&!o.chart){const t=o.getContext("2d");o.chart=new Chart(t,{type:"doughnut",data:{labels:["Cero Residuos","Eficiencia EnergÃ©tica","QuÃ­micos Verdes","Transporte Verde"],datasets:[{data:[35,28,22,15],backgroundColor:["#10B981","#3B82F6","#8B5CF6","#F59E0B"],borderWidth:0,hoverBorderWidth:2,hoverBorderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20}}}}})}}function y(){const e=document.getElementById("addProductModal");e.classList.remove("hidden"),e.classList.add("flex"),e.addEventListener("click",function(o){o.target===e&&m()})}function m(){const e=document.getElementById("addProductModal");e.classList.add("hidden"),e.classList.remove("flex"),document.getElementById("addProductForm").reset()}function f(e){const t={ventas:"Reporte de Ventas ECO",usuarios:"Reporte de Usuarios"}[e]||"Reporte";i(`Generando ${t}...`),setTimeout(()=>{const s=new Date().toISOString().slice(0,19).replace(/:/g,"-"),n=`${e}_${s}.pdf`;v(t,n)},2e3)}function v(e,o){const t=document.createElement("div");t.className="fixed top-4 right-4 bg-green-600 text-white px-6 py-4 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300 max-w-sm",t.innerHTML=`
        <div class="flex items-start space-x-3">
            <svg class="w-6 h-6 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <div class="flex-1">
                <div class="font-semibold">Â¡Reporte Generado!</div>
                <div class="text-sm opacity-90 mt-1">${e}</div>
                <button id="download-${o}" onclick="downloadReport('${o}'); this.disabled=true; this.innerHTML='â¬‡ï¸ Descargando...'; this.classList.add('opacity-50', 'cursor-not-allowed')" class="mt-2 bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm font-medium transition-colors">
                    ðŸ“¥ Descargar ${o}
                </button>
            </div>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-white hover:text-gray-200">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    `,document.body.appendChild(t),setTimeout(()=>{t.classList.remove("translate-x-full")},100),setTimeout(()=>{t.classList.add("translate-x-full"),setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},300)},8e3)}let r=new Set;function b(e){if(r.has(e))return;r.add(e),i(`Iniciando descarga de ${e}...`);const o=document.createElement("a");o.href="#",o.download=e,o.style.display="none",document.body.appendChild(o),setTimeout(()=>{document.body.removeChild(o),i(`${e} se ha descargado exitosamente`),r.delete(e)},1e3)}function w(){const e=document.querySelector(".sidebar"),o=document.querySelector(".sidebar-overlay"),t=document.querySelector(".floating-menu-btn"),s=document.querySelector(".close-sidebar-btn");e.classList.toggle("open"),o.classList.toggle("show"),e.classList.contains("open")?(document.body.style.overflow="hidden",t&&t.classList.add("hidden"),s&&s.classList.add("show")):(document.body.style.overflow="",t&&t.classList.remove("hidden"),s&&s.classList.remove("show"))}function a(){const e=document.querySelector(".sidebar"),o=document.querySelector(".sidebar-overlay"),t=document.querySelector(".floating-menu-btn"),s=document.querySelector(".close-sidebar-btn");e.classList.remove("open"),o.classList.remove("show"),document.body.style.overflow="",t&&t.classList.remove("hidden"),s&&s.classList.remove("show")}document.addEventListener("click",function(e){e.target.closest(".nav-btn")&&window.innerWidth<=768&&setTimeout(a,150)});window.addEventListener("resize",function(){window.innerWidth>768&&a()});function L(){const e=document.getElementById("adminDropdown"),o=document.getElementById("adminSettingsBtn");if(e&&o)if(e.classList.contains("show"))e.classList.remove("show"),e.style.display="none";else{const s=o.getBoundingClientRect();e.classList.add("show"),e.style.display="block",e.style.position="fixed",e.style.top=s.bottom+8+"px",e.style.left=s.right-130+"px",e.style.zIndex="99999",e.style.background="white",e.style.border="1px solid #e5e7eb",e.style.borderRadius="0.5rem",e.style.boxShadow="0 10px 25px rgba(0,0,0,0.15)",e.style.width="12rem",e.style.opacity="1",e.style.visibility="visible",e.style.transform="scale(1)",console.log("Button position:",s),console.log("Dropdown positioned at:",e.style.top,e.style.left)}}function x(){i("Cerrando sesiÃ³n...","info"),setTimeout(()=>{window.location.href="../login/login.html"},1500)}document.addEventListener("click",function(e){const o=document.getElementById("adminDropdown"),t=document.getElementById("adminSettingsBtn");o&&!o.contains(e.target)&&!t.contains(e.target)&&(o.classList.remove("show"),o.style.display="none")});document.addEventListener("DOMContentLoaded",function(){u("ventas");const e=document.querySelector(".sidebar-overlay");e&&e.addEventListener("click",a);const o=document.getElementById("adminSettingsBtn"),t=document.getElementById("adminDropdown");console.log("Admin button:",o),console.log("Admin dropdown:",t),t&&(console.log("Dropdown initial styles:",t.style.cssText),console.log("Dropdown classes:",t.className))});Object.assign(window,{syncWithWalmart:p,showSection:u,openAddProductModal:y,closeAddProductModal:m,toggleSidebar:w,closeSidebar:a,toggleAdminMenu:L,logout:x,generateReport:f,downloadReport:b});
