import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                   */let r=0,a=[];document.addEventListener("DOMContentLoaded",()=>{d(),l(),p(),g()});function d(){r=parseInt(localStorage.getItem("puntosUsuario"))||123,a=JSON.parse(localStorage.getItem("historialCompras"))||[],a.length===0&&(a=[{id:1,fecha:"2024-09-15",producto:"Botella Reutilizable",precio:15e3,puntos:15,carbono:-2.3,categoria:"Sustentable"},{id:2,fecha:"2024-09-20",producto:"Panel Solar PortÃ¡til",precio:85e3,puntos:50,carbono:-15.8,categoria:"EnergÃ­a Renovable"}],localStorage.setItem("historialCompras",JSON.stringify(a)))}function l(){const t=a.reduce((i,s)=>i+Math.abs(s.carbono),0),e=t/22,n={puntosDisplay:r,carbonoEvitado:t.toFixed(1),arbolesEquiv:e.toFixed(1)};Object.entries(n).forEach(([i,s])=>{const o=document.getElementById(i);o&&m(o,s)})}function m(t,e,n=1500){const s=e/(n/50);let o=0;const u=setInterval(()=>{o+=s,o>=e&&(o=e,clearInterval(u)),t.textContent=typeof e=="string"?o.toFixed(1):Math.floor(o)},50)}function p(){document.querySelectorAll(".animate-fade-in").forEach((e,n)=>{e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="all 0.6s ease-out",e.style.opacity="1",e.style.transform="translateY(0)"},n*200)})}function g(){window.addEventListener("resize",()=>{c()}),c()}function c(){const t=window.innerWidth>=768&&window.innerWidth<1024;window.innerWidth>=1024?(document.body.classList.add("desktop-mode"),document.body.classList.remove("mobile-mode","tablet-mode")):t?(document.body.classList.add("tablet-mode"),document.body.classList.remove("mobile-mode","desktop-mode")):(document.body.classList.add("mobile-mode"),document.body.classList.remove("tablet-mode","desktop-mode"))}window.addEventListener("focus",()=>{d(),l()});function f(){const t=document.querySelectorAll("img[data-src]"),e=new IntersectionObserver((n,i)=>{n.forEach(s=>{if(s.isIntersecting){const o=s.target;o.src=o.dataset.src,o.classList.remove("lazy"),i.unobserve(o)}})});t.forEach(n=>e.observe(n))}f();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});function b(){document.getElementById("modalNotificaciones").classList.add("hidden")}document.getElementById("formNotificaciones").addEventListener("submit",function(t){t.preventDefault();const e={puntos:this.puntos.checked,promociones:this.promociones.checked,productos:this.productos.checked,habitos:this.habitos.checked};localStorage.setItem("notificaciones",JSON.stringify(e)),alert("âœ… Preferencias de notificaciones guardadas con Ã©xito"),b()});function v(t){const e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg animate-bounce",e.innerText=t,document.body.appendChild(e),setTimeout(()=>e.remove(),4e3)}setTimeout(()=>{(JSON.parse(localStorage.getItem("notificaciones"))||{}).puntos&&v("ðŸŽ‰ Has sumado 50 Puntos Verdes en tu Ãºltima compra")},5e3);function h(){document.getElementById("modalCupones").classList.remove("hidden"),E()}let y=[{id:1,nombre:"10% Descuento Walmart",puntos:50,activo:!0,app:"Walmart"},{id:2,nombre:"5% Descuento EcoPuntos",puntos:20,activo:!0,app:"EcoPuntos"},{id:3,nombre:"15% Descuento Walmart",puntos:100,activo:!1,app:"Walmart"}];function E(){const t=document.getElementById("listaCupones");t.innerHTML="",y.forEach(e=>{const n=r>=e.puntos&&e.activo;t.innerHTML+=`
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                <div>
                    <div class="font-semibold">${e.nombre}</div>
                    <div class="text-xs text-gray-500">Requiere ${e.puntos} puntos â€¢ ${e.app}</div>
                </div>
                <button ${n?"":"disabled"} 
                    class="px-3 py-1 rounded-lg text-white ${n?"bg-green-500 hover:bg-green-600":"bg-gray-300 cursor-not-allowed"}"
                    onclick="canjearCupon(${e.id})">
                    Canjear
                </button>
            </div>
        `})}document.getElementById("btnCupones").addEventListener("click",h);
