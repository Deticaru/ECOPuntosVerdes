import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                   */let s=0,r=[];document.addEventListener("DOMContentLoaded",()=>{d(),l(),v(),h()});function d(){s=parseInt(localStorage.getItem("puntosUsuario"))||123,r=JSON.parse(localStorage.getItem("historialCompras"))||[],r.length===0&&(r=[{id:1,fecha:"2024-09-15",producto:"Botella Reutilizable",precio:15e3,puntos:15,carbono:-2.3,categoria:"Sustentable"},{id:2,fecha:"2024-09-20",producto:"Panel Solar Port√°til",precio:85e3,puntos:50,carbono:-15.8,categoria:"Energ√≠a Renovable"}],localStorage.setItem("historialCompras",JSON.stringify(r)))}function l(){const t=r.reduce((a,i)=>a+Math.abs(i.carbono),0),e=t/22,o={puntosDisplay:s,carbonoEvitado:t.toFixed(1),arbolesEquiv:e.toFixed(1)};Object.entries(o).forEach(([a,i])=>{const n=document.getElementById(a);n&&b(n,i)})}function b(t,e,o=1500){const i=e/(o/50);let n=0;const g=setInterval(()=>{n+=i,n>=e&&(n=e,clearInterval(g)),t.textContent=typeof e=="string"?n.toFixed(1):Math.floor(n)},50)}function v(){document.querySelectorAll(".animate-fade-in").forEach((e,o)=>{e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="all 0.6s ease-out",e.style.opacity="1",e.style.transform="translateY(0)"},o*200)})}function h(){window.addEventListener("resize",()=>{c()}),c()}function c(){const t=window.innerWidth>=768&&window.innerWidth<1024;window.innerWidth>=1024?(document.body.classList.add("desktop-mode"),document.body.classList.remove("mobile-mode","tablet-mode")):t?(document.body.classList.add("tablet-mode"),document.body.classList.remove("mobile-mode","desktop-mode")):(document.body.classList.add("mobile-mode"),document.body.classList.remove("tablet-mode","desktop-mode"))}window.addEventListener("focus",()=>{d(),l()});function y(){const t=document.querySelectorAll("img[data-src]"),e=new IntersectionObserver((o,a)=>{o.forEach(i=>{if(i.isIntersecting){const n=i.target;n.src=n.dataset.src,n.classList.remove("lazy"),a.unobserve(n)}})});t.forEach(o=>e.observe(o))}function w(){alert("El reporte de impacto ambiental se exportar√° en formato PDF o Excel.")}function E(){navigator.share?navigator.share({title:"Mi Impacto Ambiental",text:"He ahorrado CO‚ÇÇ y contribuido al medioambiente üå±",url:window.location.href}).then(()=>console.log("Compartido con √©xito")).catch(t=>console.log("Error al compartir:",t)):alert("La opci√≥n de compartir no est√° disponible en este navegador.")}y();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});function L(){document.getElementById("userMenu").classList.toggle("hidden")}function I(){document.getElementById("modalNotificaciones").classList.remove("hidden"),document.getElementById("userMenu").classList.add("hidden")}function u(){document.getElementById("modalNotificaciones").classList.add("hidden")}document.getElementById("formNotificaciones").addEventListener("submit",function(t){t.preventDefault();const e={puntos:this.puntos.checked,promociones:this.promociones.checked,productos:this.productos.checked,habitos:this.habitos.checked};localStorage.setItem("notificaciones",JSON.stringify(e)),alert("‚úÖ Preferencias de notificaciones guardadas con √©xito"),u()});function C(t){const e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg animate-bounce",e.innerText=t,document.body.appendChild(e),setTimeout(()=>e.remove(),4e3)}setTimeout(()=>{(JSON.parse(localStorage.getItem("notificaciones"))||{}).puntos&&C("üéâ Has sumado 50 Puntos Verdes en tu √∫ltima compra")},5e3);function m(){document.getElementById("modalCupones").classList.remove("hidden"),f()}function x(){document.getElementById("modalCupones").classList.add("hidden")}let p=[{id:1,nombre:"10% Descuento Walmart",puntos:50,activo:!0,app:"Walmart"},{id:2,nombre:"5% Descuento EcoPuntos",puntos:20,activo:!0,app:"EcoPuntos"},{id:3,nombre:"15% Descuento Walmart",puntos:100,activo:!1,app:"Walmart"}];function f(){const t=document.getElementById("listaCupones");t.innerHTML="",p.forEach(e=>{const o=s>=e.puntos&&e.activo;t.innerHTML+=`
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                <div>
                    <div class="font-semibold">${e.nombre}</div>
                    <div class="text-xs text-gray-500">Requiere ${e.puntos} puntos ‚Ä¢ ${e.app}</div>
                </div>
                <button ${o?"":"disabled"} 
                    class="px-3 py-1 rounded-lg text-white ${o?"bg-green-500 hover:bg-green-600":"bg-gray-300 cursor-not-allowed"}"
                    onclick="canjearCupon(${e.id})">
                    Canjear
                </button>
            </div>
        `})}function S(t){const e=p.find(o=>o.id===t);if(!e||!e.activo){alert("‚ùå Este cup√≥n ya no est√° disponible.");return}if(s<e.puntos){alert("‚ùå No tienes puntos suficientes para canjear este cup√≥n.");return}s-=e.puntos,localStorage.setItem("puntosUsuario",s),alert(`‚úÖ Cup√≥n canjeado: ${e.nombre} (${e.app})`),f(),actualizarEstadisticas()}document.getElementById("btnCupones").addEventListener("click",m);window.toggleUserMenu=L;window.abrirNotificaciones=I;window.cerrarNotificaciones=u;window.exportarReporte=w;window.compartirReporte=E;window.abrirCupones=m;window.cerrarCupones=x;window.canjearCupon=S;
